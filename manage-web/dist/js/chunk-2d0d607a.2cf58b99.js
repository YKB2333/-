(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d607a"],{"718b":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Card",[a("div",{staticClass:"margin-bottom-10"},[a("Row",[a("Col",{attrs:{span:"6"}},[a("label",[e._v("用户ID: ")]),a("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入用户ID"},model:{value:e.search.userId,callback:function(t){e.$set(e.search,"userId",t)},expression:"search.userId"}})],1),a("Col",{attrs:{span:"6"}},[a("label",[e._v("用户名: ")]),a("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入用户名称"},model:{value:e.search.username,callback:function(t){e.$set(e.search,"username",t)},expression:"search.username"}})],1),a("Col",{attrs:{span:"6"}},[a("label",[e._v("手机号: ")]),a("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入手机号码"},model:{value:e.search.phone,callback:function(t){e.$set(e.search,"phone",t)},expression:"search.phone"}})],1),a("Col",{attrs:{span:"6"}},[a("label",[e._v("推荐人ID: ")]),a("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入推荐人ID"},model:{value:e.search.parentUserId,callback:function(t){e.$set(e.search,"parentUserId",t)},expression:"search.parentUserId"}})],1)],1),a("Row",{staticClass:"margin-top-10"},[a("Col",{attrs:{span:"6"}},[a("label",[e._v("推荐人名称: ")]),a("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入用户ID"},model:{value:e.search.parentUserName,callback:function(t){e.$set(e.search,"parentUserName",t)},expression:"search.parentUserName"}})],1),a("Col",{attrs:{span:"6"}},[a("label",[e._v("注册时间: ")]),a("DatePicker",{staticStyle:{width:"200px"},attrs:{format:"yyyy-MM-dd",type:"daterange",placement:"bottom-end",placeholder:"选择注册时间范围"},model:{value:e.search.dateRange,callback:function(t){e.$set(e.search,"dateRange",t)},expression:"search.dateRange"}})],1),a("Col",{attrs:{span:"6"}},[a("label",[e._v("状态: ")]),a("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择状态",clearable:""},model:{value:e.search.status,callback:function(t){e.$set(e.search,"status",t)},expression:"search.status"}},e._l(e.option.statuss,function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label)+"\n                        ")])}),1)],1),a("Col",{attrs:{span:"6"}},[a("Button",{attrs:{type:"success",icon:"ios-search"},on:{click:e.handleSearch}},[e._v("查询")])],1)],1)],1),a("div",{staticClass:"user-list",staticStyle:{overflow:"hidden"}},[a("Table",{attrs:{border:"",loading:e.content.loading,columns:e.content.columns,data:e.content.records}}),a("div",{staticClass:"margin-top-8"}),a("Page",{staticClass:"margin-right-10",staticStyle:{display:"inline-flex",float:"right"},attrs:{total:e.content.total,"show-sizer":"","show-total":"","show-elevator":""},on:{"on-change":e.handleChangePage,"on-page-size-change":e.handleChangePageSize}})],1),a("Drawer",{staticClass:"add-update-drawer",attrs:{title:e.form.title,width:"720","mask-closable":!1},model:{value:e.form.show,callback:function(t){e.$set(e.form,"show",t)},expression:"form.show"}},[a("Form",{ref:"formUser",staticStyle:{"margin-right":"30px"},attrs:{model:e.form.user,rules:e.form.ruleValidate}},[a("FormItem",{attrs:{label:"用户名: ","label-position":"left","label-width":80,prop:"username"}},[a("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入用户名称"},model:{value:e.form.user.username,callback:function(t){e.$set(e.form.user,"username",t)},expression:"form.user.username"}})],1),a("FormItem",{attrs:{label:"电话号码: ","label-position":"left","label-width":80,prop:"phone"}},[a("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入电话号码"},model:{value:e.form.user.phone,callback:function(t){e.$set(e.form.user,"phone",t)},expression:"form.user.phone"}})],1),a("FormItem",{attrs:{label:"优先级别: ","label-position":"left","label-width":80,prop:"rank"}},[a("Rate",{attrs:{count:10},model:{value:e.form.user.rank,callback:function(t){e.$set(e.form.user,"rank",t)},expression:"form.user.rank"}})],1),a("FormItem",{attrs:{label:"状态: ","label-position":"left","label-width":80,prop:"status"}},[a("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择状态"},model:{value:e.form.user.status,callback:function(t){e.$set(e.form.user,"status",t)},expression:"form.user.status"}},e._l(e.option.statuss,function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label)+"\n                        ")])}),1)],1),a("FormItem",{attrs:{"label-width":80}},[a("Button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary"},on:{click:function(t){return e.handleSubmit("formUser")}}},[e._v("提交")]),a("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(t){return e.handleReset("formUser")}}},[e._v("重置")])],1)],1)],1)],1)],1)},r=[],l=a("d689"),o={name:"index",data(){const e=async(e,t,a)=>{if(!t)return a(new Error("手机号不能为空"));try{let e=await Object(l["a"])("api/pomelomgm/user/phone/verify?phone="+t+"&userId="+this.form.user.id);e.data&&a(new Error("该手机号已被注册, 请勿重复"))}catch(s){a(s)}};return{option:{statuss:[{value:"Y",label:"正常"},{value:"N",label:"冻结"}]},search:{userId:null,username:null,phone:null,parentUserId:null,parentUserName:null,regStartDate:null,regEndDate:null,dateRange:[],status:null,page:1,pageSize:10},content:{loading:!1,records:[],columns:[{title:"ID",key:"id",width:80},{title:"用户名",key:"username",width:150},{title:"电话",key:"phone",width:120},{title:"大米",key:"riceAmount",width:120},{title:"小米",key:"riceAmount",width:120},{title:"总资产",key:"totalAssets",width:120},{title:"EC币",key:"ecAmount",width:120},{title:"领养中鸡数",key:"chookCount",width:120,render:(e,t)=>{return e("a",{on:{click:()=>{this.handleToUserChook(t.row.id)}}},t.row.chookCount)}},{title:"团队人数",key:"userCount",width:120,render:(e,t)=>{return e("a",{on:{click:()=>{this.handleToTeamUser(t.row.id)}}},t.row.userCount)}},{title:"推荐人ID",key:"parentUserId",width:90},{title:"推荐人名称",key:"parentUserName",width:150},{title:"优先级别",key:"rank",width:100},{title:"注册时间",key:"createTime",width:170},{title:"状态",key:"status",width:120,render:(e,t)=>{let a="正常";return"N"==t.row.status.value&&(a="冻结"),e("span",{},a)}},{title:"EOS账号",key:"accountNo",width:120},{title:"EOS收币二维码",key:"qrCode",width:180,render:(e,t)=>{let a="";return t.row.qrCode&&(a=this.baseImgUrl+t.row.qrCode),e("img",{attrs:{src:a},style:{width:"80px",height:"80px"}},"类别icon")}},{title:"操作",key:"action",width:350,align:"center",render:(e,t)=>{return e("div",[e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:()=>{this.handleEdit(t.row)}}},"编辑"),e("Button",{props:{type:"warning",size:"small"},on:{click:()=>{this.handleEdit(t.row)}}},"增减小米大米")])}}],total:0},form:{title:"修改用户信息",isAdd:!1,show:!1,user:{status:null},ruleValidate:{username:[{required:!0,message:"用户名不能为空",trigger:"blur"}],phone:[{validator:e,required:!0,trigger:"blur"}]}}}},created(){this.queryUser()},methods:{handleSearch(){this.queryUser()},handleToUserChook(e){this.$router.push("/user/chook/list?userId="+e)},handleToTeamUser(e){this.$router.push("/team/user/list?userId="+e)},handleChangePage(e){this.search.page=e,this.queryUser()},handleChangePageSize(e){this.search.pageSize=e,this.queryUser()},handleEdit(e){this.form.title="修改用户信息",this.form.isAdd=!1,this.form.show=!0,this.form.user=e,this.form.user.status=this.form.user.status.value},handleSubmit(e){this.$refs[e].validate(e=>{e?(this.form.isAdd?this.$Message.error("操作暂不支持"):this.updateUser(),this.form.show=!1,this.queryUser()):this.$Message.error("验证不通过!")})},handleReset(e){this.$refs[e].resetFields()},async updateUser(){try{let t=await Object(l["b"])("api/pomelomgm/user/update/"+this.form.user.id,this.form.user);console.info(t),t.status==this.rescode.OK?this.$Message.success("更新成功"):this.$Message.error(t.msg),this.queryUser()}catch(e){this.$throw(e)}},async queryUser(){this.search.dateRange&&2==this.search.dateRange.length&&(""!=this.search.dateRange[0]?this.search.regStartDate=this.search.dateRange[0].format("yyyy-MM-dd hh:mm:ss"):this.search.regStartDate=null,""!=this.search.dateRange[1]?this.search.regEndDate=this.search.dateRange[1].format("yyyy-MM-dd hh:mm:ss"):this.search.regEndDate=null),this.content.loading=!0;try{let t=await Object(l["b"])("api/pomelomgm/user/list",this.search);1==t.status?(this.content.total=t.data.total,this.content.records=t.data.records):this.$Message.error(t.msg)}catch(e){this.$throw(e)}this.content.loading=!1}}},i=o,n=a("2877"),h=Object(n["a"])(i,s,r,!1,null,"58ca92e0",null);t["default"]=h.exports}}]);