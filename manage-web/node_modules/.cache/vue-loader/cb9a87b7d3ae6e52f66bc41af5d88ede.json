{"remainingRequest":"C:\\Users\\YKB\\Desktop\\github\\manage-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\YKB\\Desktop\\github\\manage-web\\src\\view\\system\\user\\components\\reset-password.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\YKB\\Desktop\\github\\manage-web\\src\\view\\system\\user\\components\\reset-password.vue","mtime":1562898218000},{"path":"C:\\Users\\YKB\\Desktop\\github\\manage-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\YKB\\Desktop\\github\\manage-web\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\YKB\\Desktop\\github\\manage-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\YKB\\Desktop\\github\\manage-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport { post } from '@/libs/axios-cfg'\r\nexport default {\r\n    data(){\r\n        return {\r\n            show:true,\r\n            loading:false,\r\n            data:{\r\n                password:'',\r\n                rePassword:''\r\n            },\r\n            ruls:{\r\n                password: [\r\n                    { required: true, message: \"请填写密码\"},\r\n                    {pattern:/^(\\w){6,18}$/,message:'密码应为[A-Za-z0-9_]组成的6-18位字符'}\r\n                ],\r\n                rePassword:{\r\n                    validator:(rule, value, callback, source, options) => {\r\n                        if (value === \"\") {\r\n                            callback(new Error(\"请再次输入密码\"));\r\n                        } else if (value !== this.data.password) {\r\n                            callback(new Error(\"两次输入密码不一致!\"));\r\n                        } else {\r\n                            callback();\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n    props:{\r\n        user:{\r\n            type:Object,\r\n            default:{}\r\n        }\r\n    },\r\n    methods:{\r\n        /**\r\n         * @description 关闭Modal\r\n         * @param reload 是否重新加载数据\r\n         */\r\n        cancel(reload = false) {\r\n            this.$emit(\"cancel\", \"resetPassword\", reload);\r\n        },\r\n        ok(){\r\n            this.$refs.modalForm.validate(valid => {\r\n                if (valid) {\r\n                    this.resetPost({\r\n                        password:this.data.password,\r\n                        uid:this.user.id\r\n                    })\r\n                }\r\n            });\r\n        },\r\n        async resetPost(data){\r\n            this.loading = true;\r\n            try {\r\n                let res = await post('/system/user/reset-password',data)\r\n                this.$Message.success(\"用户 \"+this.user.username+\" 密码重置成功\");\r\n                this.cancel(true)\r\n            } catch (error) {\r\n                this.$throw(error)\r\n            }\r\n            this.loading = false;\r\n        }\r\n    }\r\n\r\n};\r\n",{"version":3,"sources":["reset-password.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAqBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"reset-password.vue","sourceRoot":"src/view/system/user/components","sourcesContent":["<template>\r\n    <div>\r\n        <Modal v-model=\"show\" :title=\"'重置 '+user.username+' 的密码'\"\r\n            :mask-closable=\"false\"  :closable=\"false\">\r\n             <Form ref=\"modalForm\" :model=\"data\" :rules=\"ruls\"\r\n                    :label-width=\"80\">\r\n                <FormItem label=\"新密码\" prop=\"password\">\r\n                    <Input v-model.trim=\"data.password\" type=\"password\"></Input>\r\n                </FormItem>\r\n                <FormItem label=\"重复密码\" prop=\"rePassword\">\r\n                    <Input v-model.trim=\"data.rePassword\" type=\"password\"></Input>\r\n                </FormItem>\r\n            </Form>\r\n            <div slot=\"footer\">\r\n                <Button type=\"default\" :disabled=\"loading\" @click=\"cancel(false)\">取消</Button>\r\n                <Button type=\"primary\" :loading=\"loading\" @click=\"ok\">确定</Button>\r\n            </div>\r\n        </Modal>\r\n    </div>\r\n</template>\r\n<script>\r\nimport { post } from '@/libs/axios-cfg'\r\nexport default {\r\n    data(){\r\n        return {\r\n            show:true,\r\n            loading:false,\r\n            data:{\r\n                password:'',\r\n                rePassword:''\r\n            },\r\n            ruls:{\r\n                password: [\r\n                    { required: true, message: \"请填写密码\"},\r\n                    {pattern:/^(\\w){6,18}$/,message:'密码应为[A-Za-z0-9_]组成的6-18位字符'}\r\n                ],\r\n                rePassword:{\r\n                    validator:(rule, value, callback, source, options) => {\r\n                        if (value === \"\") {\r\n                            callback(new Error(\"请再次输入密码\"));\r\n                        } else if (value !== this.data.password) {\r\n                            callback(new Error(\"两次输入密码不一致!\"));\r\n                        } else {\r\n                            callback();\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n    props:{\r\n        user:{\r\n            type:Object,\r\n            default:{}\r\n        }\r\n    },\r\n    methods:{\r\n        /**\r\n         * @description 关闭Modal\r\n         * @param reload 是否重新加载数据\r\n         */\r\n        cancel(reload = false) {\r\n            this.$emit(\"cancel\", \"resetPassword\", reload);\r\n        },\r\n        ok(){\r\n            this.$refs.modalForm.validate(valid => {\r\n                if (valid) {\r\n                    this.resetPost({\r\n                        password:this.data.password,\r\n                        uid:this.user.id\r\n                    })\r\n                }\r\n            });\r\n        },\r\n        async resetPost(data){\r\n            this.loading = true;\r\n            try {\r\n                let res = await post('/system/user/reset-password',data)\r\n                this.$Message.success(\"用户 \"+this.user.username+\" 密码重置成功\");\r\n                this.cancel(true)\r\n            } catch (error) {\r\n                this.$throw(error)\r\n            }\r\n            this.loading = false;\r\n        }\r\n    }\r\n\r\n};\r\n</script>\r\n"]}]}