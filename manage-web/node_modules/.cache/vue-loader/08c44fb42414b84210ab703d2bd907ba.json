{"remainingRequest":"C:\\Users\\YKB\\Desktop\\github\\manage-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\YKB\\Desktop\\github\\manage-web\\src\\view\\system\\resource\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\YKB\\Desktop\\github\\manage-web\\src\\view\\system\\resource\\index.vue","mtime":1562898218000},{"path":"C:\\Users\\YKB\\Desktop\\github\\manage-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\YKB\\Desktop\\github\\manage-web\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\YKB\\Desktop\\github\\manage-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\YKB\\Desktop\\github\\manage-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport { post } from '@/libs/axios-cfg'\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      removeModal: false,\r\n      setting: {\r\n        loading: true,\r\n        showBorder: true\r\n      },\r\n      props: {\r\n        stripe: true,\r\n        border: true,\r\n        showHeader: true,\r\n        showSummary: false,\r\n        showRowHover: true,\r\n        showIndex: false,\r\n        treeType: true,\r\n        isFold: true,\r\n        expandType: false,\r\n        selectionType: false,\r\n      },\r\n      datas: [],\r\n      columns: [\r\n        {\r\n          label: '资源名称',\r\n          prop: 'name',\r\n          width: '400px',\r\n        },\r\n        {\r\n          label: '类型',\r\n          prop: 'type',\r\n          type: 'template',\r\n          template: 'type',\r\n        },\r\n        {\r\n          label: '资源链接',\r\n          prop: 'url',\r\n        },\r\n        {\r\n          label: '权限标识',\r\n          prop: 'permission',\r\n        },\r\n        {\r\n          label: '验证与否',\r\n          prop: 'verification',\r\n          type: 'template',\r\n          template: 'verification',\r\n          width: '85px'\r\n        },\r\n        {\r\n          label: '颜色',\r\n          prop: 'color',\r\n          type: 'template',\r\n          template: 'color',\r\n          width: '60px'\r\n        },\r\n        {\r\n          label: '图标',\r\n          prop: 'icon',\r\n          type: 'template',\r\n          template: 'icon',\r\n          width: '80px'\r\n        },\r\n        {\r\n          label: '排序',\r\n          prop: 'sort',\r\n          width: '100px'\r\n        },\r\n        {\r\n          label: '操作',\r\n          type: 'template',\r\n          prop: 'action',\r\n          template: 'action',\r\n        }\r\n      ],\r\n      modal: {\r\n        show: false,\r\n        type: 1,\r\n        data: {\r\n          id: 0,\r\n          name: '',\r\n          type: 1, //0-菜单 1-按钮\r\n          url: '',\r\n          permission: '',\r\n          icon: '',\r\n          sort: 0,\r\n          color: '#19BE6B',\r\n          verification: 'true'\r\n        }\r\n      },\r\n      removeObject: null\r\n    }\r\n  },\r\n  created () {\r\n    this.getData()\r\n  },\r\n  methods: {\r\n    async getData () {\r\n      this.setting.loading = true\r\n      try {\r\n        let res = await post('/system/resource/list')\r\n        this.datas = res.data\r\n      } catch (error) {\r\n        this.$throw(error)\r\n      }\r\n      this.setting.loading = false\r\n    },\r\n    async addOK () {\r\n      this.$Message.loading({\r\n        content: '资源添加中...',\r\n        duration: 0\r\n      })\r\n      try {\r\n        await post('/system/resource/add', this.modal.data)\r\n        this.getData(false)\r\n        this.$Message.destroy()\r\n        this.$Message.success({\r\n          content: '资源添加成功',\r\n          duration: 1.5\r\n        })\r\n      } catch (error) {\r\n        this.$throw(error)\r\n      }\r\n    },\r\n    async editOk () {\r\n      this.$Message.loading({\r\n        content: '资源更新中...',\r\n        duration: 0\r\n      })\r\n      try {\r\n        await post('/system/resource/update/{id}', this.modal.data, {\r\n          id: this.modal.data.id\r\n        })\r\n        this.getData(false)\r\n        this.$Message.destroy()\r\n        this.$Message.success({\r\n          content: '资源更新成功',\r\n          duration: 1.5\r\n        })\r\n      } catch (error) {\r\n        this.$throw(error)\r\n      }\r\n    },\r\n    removeModalOpen (id) {\r\n      this.removeModal = true\r\n      this.removeObject = id\r\n    },\r\n    async remove () {\r\n      this.setting.loading = true\r\n      this.$Message.loading({\r\n        content: '资源删除中...',\r\n        duration: 0\r\n      })\r\n      try {\r\n        await post('/system/resource/remove/{id}', null, {\r\n          id: this.removeObject\r\n        })\r\n        this.getData(false)\r\n        this.$Message.destroy()\r\n        this.$Message.success({\r\n          content: '资源删除成功',\r\n          duration: 1.5\r\n        })\r\n      } catch (error) {\r\n        this.$throw(error)\r\n      }\r\n      this.setting.loading = false\r\n      this.removeModal = false\r\n    },\r\n    modalOk () {\r\n      if (this.modal.type == 1) {\r\n        this.addOK()\r\n      } else {\r\n        this.editOk()\r\n      }\r\n    },\r\n    edit (row) {\r\n      this.modal.type = 2\r\n      this.modal.data = {\r\n        id: row.id,\r\n        name: row.name,\r\n        type: row.type, //1-菜单 2-按钮\r\n        url: row.url,\r\n        permission: row.permission,\r\n        icon: row.icon,\r\n        sort: row.sort,\r\n        color: row.color == '' ? '#19BE6B' : row.color,\r\n        verification: row.verification == null ? 'true' : row.verification == true ? 'true' : 'false',\r\n      }\r\n      this.modal.show = true\r\n    },\r\n    openAddModal (parent = null) {\r\n      this.modal.type = 1\r\n      this.modal.data = {\r\n        id: 0,\r\n        parentId: parent == null ? null : parent.id,\r\n        name: '',\r\n        type: 0, //1-菜单 2-按钮\r\n        url: parent == null ? null : parent.url,\r\n        permission: parent == null ? null : parent.permission,\r\n        icon: '',\r\n        sort: 0,\r\n        parentName: parent == null ? null : parent.name,\r\n        verification: parent == null ? 'true' : parent.verification == true ? 'true' : 'false',\r\n        color: '#19BE6B'\r\n      }\r\n      console.log(this.modal.data)\r\n      this.modal.show = true\r\n    }\r\n  }\r\n}\r\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqIA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/view/system/resource","sourcesContent":["<template>\r\n  <div>\r\n    <Card>\r\n      <p slot=\"title\" class=\"card-title\">\r\n        <Icon type=\"home\"></Icon>\r\n        <span>资源管理</span>\r\n      </p>\r\n      <div>\r\n        <template>\r\n          <Row>\r\n            <Col span=\"15\" class=\"margin-bottom-10\">\r\n              <Button type=\"info\" @click=\"openAddModal(null)\">\r\n                <Icon type=\"md-add\"></Icon>&nbsp;添加资源\r\n              </Button>\r\n              <Button :disabled=\"setting.loading\" type=\"success\" @click=\"getData\">\r\n                <Icon type=\"md-refresh\"></Icon>&nbsp;刷新数据\r\n              </Button>\r\n              <Tooltip placement=\"top\">\r\n                <i-switch size=\"large\" v-model=\"props.isFold\">\r\n                  <span slot=\"open\">开启</span>\r\n                  <span slot=\"close\">关闭</span>\r\n                </i-switch>\r\n                <div slot=\"content\">\r\n                  <p>是否折叠所有的节点</p>\r\n                </div>\r\n              </Tooltip>\r\n            </Col>\r\n          </Row>\r\n          <zk-table\r\n            ref=\"table\"\r\n            sum-text=\"sum\"\r\n            index-text=\"#\"\r\n            :data=\"datas\"\r\n            :columns=\"columns\"\r\n            :stripe=\"props.stripe\"\r\n            :border=\"props.border\"\r\n            :show-header=\"props.showHeader\"\r\n            :show-summary=\"props.showSummary\"\r\n            :show-row-hover=\"props.showRowHover\"\r\n            :show-index=\"props.showIndex\"\r\n            :tree-type=\"props.treeType\"\r\n            :is-fold=\"props.isFold\"\r\n            :expand-type=\"props.expandType\"\r\n            :selection-type=\"props.selectionType\">\r\n            <template slot=\"type\" slot-scope=\"scope\">\r\n              <span v-if=\"scope.row.type==0\"><Icon type=\"grid\"></Icon>&nbsp;菜单</span>\r\n              <span v-else><Icon type=\"android-radio-button-on\"></Icon>&nbsp;按钮</span>\r\n            </template>\r\n            <template slot=\"icon\" slot-scope=\"scope\">\r\n              <span v-if=\"scope.row.icon!=null && scope.row.icon!=''\"><Icon :type=\"scope.row.icon\"></Icon></span>\r\n              <span v-else>-</span>\r\n            </template>\r\n            <template slot=\"color\" slot-scope=\"scope\">\r\n                            <span v-if=\"scope.row.color!=null && scope.row.color!=''\">\r\n                                <Icon type=\"paintbucket\" :color=\"scope.row.color\"></Icon>\r\n                            </span>\r\n              <span v-else>-</span>\r\n            </template>\r\n            <template slot=\"verification\" slot-scope=\"scope\">\r\n                            <span v-if=\"scope.row.verification==true\">\r\n                                是\r\n                            </span>\r\n              <span v-else>否</span>\r\n            </template>\r\n            <template slot=\"action\" slot-scope=\"scope\">\r\n              <Button type=\"primary\" @click=\"edit(scope.row)\" size=\"small\">编辑</Button>\r\n              <Button type=\"success\" @click=\"openAddModal(scope.row)\" size=\"small\">添加下级</Button>\r\n              <Button type=\"error\" @click=\"removeModalOpen(scope.row.id)\" size=\"small\">删除</Button>\r\n            </template>\r\n          </zk-table>\r\n        </template>\r\n      </div>\r\n    </Card>\r\n    <Modal v-model=\"modal.show\" :title=\"modal.type==1 ? '添加资源':'更新资源'\"\r\n           @on-ok=\"modalOk\"\r\n           :mask-closable=\"false\">\r\n      <Alert show-icon>为方便操作，添加时[资源链接/权限标识]会自动继承父级的资源属性。</Alert>\r\n      <Form :model=\"modal.data\" :label-width=\"80\">\r\n        <FormItem v-if=\"modal.type==2\" label=\"ID\">\r\n          <Input disabled :value=\"modal.data.id\"></Input>\r\n        </FormItem>\r\n        <FormItem v-if=\"modal.type==1 && modal.data.parentName!=null\" label=\"父级名称\">\r\n          <Input disabled :value=\"modal.data.parentName\"></Input>\r\n        </FormItem>\r\n        <FormItem label=\"名称\">\r\n          <Input v-model.trim=\"modal.data.name\"></Input>\r\n        </FormItem>\r\n        <FormItem label=\"类型\">\r\n          <Select v-model.trim=\"modal.data.type\" style=\"width:100%\">\r\n            <Option v-for=\"item in [{label:'菜单',value:0},{label:'按钮',value:1}]\"\r\n                    :value=\"item.value\" :key=\"item.value\">{{ item.label }}\r\n            </Option>\r\n          </Select>\r\n        </FormItem>\r\n        <FormItem label=\"资源链接\">\r\n          <Input v-model.trim=\"modal.data.url\"></Input>\r\n        </FormItem>\r\n        <FormItem label=\"权限标识\">\r\n          <Input v-model.trim=\"modal.data.permission\"></Input>\r\n        </FormItem>\r\n        <FormItem label=\"验证与否\">\r\n          <Select v-model=\"modal.data.verification\" style=\"width:100%\">\r\n            <Option v-for=\"verOption in [{label:'是',value:'true'},{label:'否',value:'false'}]\"\r\n                    :value=\"verOption.value\" :key=\"verOption.value\">{{ verOption.label }}\r\n            </Option>\r\n          </Select>\r\n        </FormItem>\r\n        <FormItem label=\"颜色标示\">\r\n          <color-picker v-model=\"modal.data.color\" recommend></color-picker>\r\n        </FormItem>\r\n        <FormItem label=\"图标\">\r\n          <Input v-model.trim=\"modal.data.icon\"></Input>\r\n        </FormItem>\r\n        <FormItem label=\"排序\">\r\n          <InputNumber :min=\"0\" :step=\"1\" v-model.trim=\"modal.data.sort\" style=\"width:100%\"/>\r\n        </FormItem>\r\n      </Form>\r\n    </Modal>\r\n    <Modal v-model=\"removeModal\" width=\"360\">\r\n      <p slot=\"header\" style=\"color:#f60;text-align:center\">\r\n        <Icon type=\"information-circled\"></Icon>\r\n        <span>提示</span>\r\n      </p>\r\n      <div style=\"text-align:center\">\r\n        <p>此操作为不可逆操作，是否确认删除？</p>\r\n      </div>\r\n      <div slot=\"footer\">\r\n        <Button type=\"error\" size=\"large\" long @click=\"remove\">确认删除</Button>\r\n      </div>\r\n    </Modal>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { post } from '@/libs/axios-cfg'\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      removeModal: false,\r\n      setting: {\r\n        loading: true,\r\n        showBorder: true\r\n      },\r\n      props: {\r\n        stripe: true,\r\n        border: true,\r\n        showHeader: true,\r\n        showSummary: false,\r\n        showRowHover: true,\r\n        showIndex: false,\r\n        treeType: true,\r\n        isFold: true,\r\n        expandType: false,\r\n        selectionType: false,\r\n      },\r\n      datas: [],\r\n      columns: [\r\n        {\r\n          label: '资源名称',\r\n          prop: 'name',\r\n          width: '400px',\r\n        },\r\n        {\r\n          label: '类型',\r\n          prop: 'type',\r\n          type: 'template',\r\n          template: 'type',\r\n        },\r\n        {\r\n          label: '资源链接',\r\n          prop: 'url',\r\n        },\r\n        {\r\n          label: '权限标识',\r\n          prop: 'permission',\r\n        },\r\n        {\r\n          label: '验证与否',\r\n          prop: 'verification',\r\n          type: 'template',\r\n          template: 'verification',\r\n          width: '85px'\r\n        },\r\n        {\r\n          label: '颜色',\r\n          prop: 'color',\r\n          type: 'template',\r\n          template: 'color',\r\n          width: '60px'\r\n        },\r\n        {\r\n          label: '图标',\r\n          prop: 'icon',\r\n          type: 'template',\r\n          template: 'icon',\r\n          width: '80px'\r\n        },\r\n        {\r\n          label: '排序',\r\n          prop: 'sort',\r\n          width: '100px'\r\n        },\r\n        {\r\n          label: '操作',\r\n          type: 'template',\r\n          prop: 'action',\r\n          template: 'action',\r\n        }\r\n      ],\r\n      modal: {\r\n        show: false,\r\n        type: 1,\r\n        data: {\r\n          id: 0,\r\n          name: '',\r\n          type: 1, //0-菜单 1-按钮\r\n          url: '',\r\n          permission: '',\r\n          icon: '',\r\n          sort: 0,\r\n          color: '#19BE6B',\r\n          verification: 'true'\r\n        }\r\n      },\r\n      removeObject: null\r\n    }\r\n  },\r\n  created () {\r\n    this.getData()\r\n  },\r\n  methods: {\r\n    async getData () {\r\n      this.setting.loading = true\r\n      try {\r\n        let res = await post('/system/resource/list')\r\n        this.datas = res.data\r\n      } catch (error) {\r\n        this.$throw(error)\r\n      }\r\n      this.setting.loading = false\r\n    },\r\n    async addOK () {\r\n      this.$Message.loading({\r\n        content: '资源添加中...',\r\n        duration: 0\r\n      })\r\n      try {\r\n        await post('/system/resource/add', this.modal.data)\r\n        this.getData(false)\r\n        this.$Message.destroy()\r\n        this.$Message.success({\r\n          content: '资源添加成功',\r\n          duration: 1.5\r\n        })\r\n      } catch (error) {\r\n        this.$throw(error)\r\n      }\r\n    },\r\n    async editOk () {\r\n      this.$Message.loading({\r\n        content: '资源更新中...',\r\n        duration: 0\r\n      })\r\n      try {\r\n        await post('/system/resource/update/{id}', this.modal.data, {\r\n          id: this.modal.data.id\r\n        })\r\n        this.getData(false)\r\n        this.$Message.destroy()\r\n        this.$Message.success({\r\n          content: '资源更新成功',\r\n          duration: 1.5\r\n        })\r\n      } catch (error) {\r\n        this.$throw(error)\r\n      }\r\n    },\r\n    removeModalOpen (id) {\r\n      this.removeModal = true\r\n      this.removeObject = id\r\n    },\r\n    async remove () {\r\n      this.setting.loading = true\r\n      this.$Message.loading({\r\n        content: '资源删除中...',\r\n        duration: 0\r\n      })\r\n      try {\r\n        await post('/system/resource/remove/{id}', null, {\r\n          id: this.removeObject\r\n        })\r\n        this.getData(false)\r\n        this.$Message.destroy()\r\n        this.$Message.success({\r\n          content: '资源删除成功',\r\n          duration: 1.5\r\n        })\r\n      } catch (error) {\r\n        this.$throw(error)\r\n      }\r\n      this.setting.loading = false\r\n      this.removeModal = false\r\n    },\r\n    modalOk () {\r\n      if (this.modal.type == 1) {\r\n        this.addOK()\r\n      } else {\r\n        this.editOk()\r\n      }\r\n    },\r\n    edit (row) {\r\n      this.modal.type = 2\r\n      this.modal.data = {\r\n        id: row.id,\r\n        name: row.name,\r\n        type: row.type, //1-菜单 2-按钮\r\n        url: row.url,\r\n        permission: row.permission,\r\n        icon: row.icon,\r\n        sort: row.sort,\r\n        color: row.color == '' ? '#19BE6B' : row.color,\r\n        verification: row.verification == null ? 'true' : row.verification == true ? 'true' : 'false',\r\n      }\r\n      this.modal.show = true\r\n    },\r\n    openAddModal (parent = null) {\r\n      this.modal.type = 1\r\n      this.modal.data = {\r\n        id: 0,\r\n        parentId: parent == null ? null : parent.id,\r\n        name: '',\r\n        type: 0, //1-菜单 2-按钮\r\n        url: parent == null ? null : parent.url,\r\n        permission: parent == null ? null : parent.permission,\r\n        icon: '',\r\n        sort: 0,\r\n        parentName: parent == null ? null : parent.name,\r\n        verification: parent == null ? 'true' : parent.verification == true ? 'true' : 'false',\r\n        color: '#19BE6B'\r\n      }\r\n      console.log(this.modal.data)\r\n      this.modal.show = true\r\n    }\r\n  }\r\n}\r\n</script>\r\n"]}]}