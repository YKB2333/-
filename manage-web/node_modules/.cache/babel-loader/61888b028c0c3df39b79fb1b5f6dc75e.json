{"remainingRequest":"C:\\Users\\YKB\\Desktop\\github\\manage-web\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\YKB\\Desktop\\github\\manage-web\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\YKB\\Desktop\\github\\manage-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\YKB\\Desktop\\github\\manage-web\\src\\view\\system\\resource\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\YKB\\Desktop\\github\\manage-web\\src\\view\\system\\resource\\index.vue","mtime":1562898218000},{"path":"C:\\Users\\YKB\\Desktop\\github\\manage-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\YKB\\Desktop\\github\\manage-web\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\YKB\\Desktop\\github\\manage-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\YKB\\Desktop\\github\\manage-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { post } from '@/libs/axios-cfg';\nexport default {\n  data() {\n    return {\n      removeModal: false,\n      setting: {\n        loading: true,\n        showBorder: true\n      },\n      props: {\n        stripe: true,\n        border: true,\n        showHeader: true,\n        showSummary: false,\n        showRowHover: true,\n        showIndex: false,\n        treeType: true,\n        isFold: true,\n        expandType: false,\n        selectionType: false\n      },\n      datas: [],\n      columns: [{\n        label: '资源名称',\n        prop: 'name',\n        width: '400px'\n      }, {\n        label: '类型',\n        prop: 'type',\n        type: 'template',\n        template: 'type'\n      }, {\n        label: '资源链接',\n        prop: 'url'\n      }, {\n        label: '权限标识',\n        prop: 'permission'\n      }, {\n        label: '验证与否',\n        prop: 'verification',\n        type: 'template',\n        template: 'verification',\n        width: '85px'\n      }, {\n        label: '颜色',\n        prop: 'color',\n        type: 'template',\n        template: 'color',\n        width: '60px'\n      }, {\n        label: '图标',\n        prop: 'icon',\n        type: 'template',\n        template: 'icon',\n        width: '80px'\n      }, {\n        label: '排序',\n        prop: 'sort',\n        width: '100px'\n      }, {\n        label: '操作',\n        type: 'template',\n        prop: 'action',\n        template: 'action'\n      }],\n      modal: {\n        show: false,\n        type: 1,\n        data: {\n          id: 0,\n          name: '',\n          type: 1,\n          //0-菜单 1-按钮\n          url: '',\n          permission: '',\n          icon: '',\n          sort: 0,\n          color: '#19BE6B',\n          verification: 'true'\n        }\n      },\n      removeObject: null\n    };\n  },\n\n  created() {\n    this.getData();\n  },\n\n  methods: {\n    async getData() {\n      this.setting.loading = true;\n\n      try {\n        let res = await post('/system/resource/list');\n        this.datas = res.data;\n      } catch (error) {\n        this.$throw(error);\n      }\n\n      this.setting.loading = false;\n    },\n\n    async addOK() {\n      this.$Message.loading({\n        content: '资源添加中...',\n        duration: 0\n      });\n\n      try {\n        await post('/system/resource/add', this.modal.data);\n        this.getData(false);\n        this.$Message.destroy();\n        this.$Message.success({\n          content: '资源添加成功',\n          duration: 1.5\n        });\n      } catch (error) {\n        this.$throw(error);\n      }\n    },\n\n    async editOk() {\n      this.$Message.loading({\n        content: '资源更新中...',\n        duration: 0\n      });\n\n      try {\n        await post('/system/resource/update/{id}', this.modal.data, {\n          id: this.modal.data.id\n        });\n        this.getData(false);\n        this.$Message.destroy();\n        this.$Message.success({\n          content: '资源更新成功',\n          duration: 1.5\n        });\n      } catch (error) {\n        this.$throw(error);\n      }\n    },\n\n    removeModalOpen(id) {\n      this.removeModal = true;\n      this.removeObject = id;\n    },\n\n    async remove() {\n      this.setting.loading = true;\n      this.$Message.loading({\n        content: '资源删除中...',\n        duration: 0\n      });\n\n      try {\n        await post('/system/resource/remove/{id}', null, {\n          id: this.removeObject\n        });\n        this.getData(false);\n        this.$Message.destroy();\n        this.$Message.success({\n          content: '资源删除成功',\n          duration: 1.5\n        });\n      } catch (error) {\n        this.$throw(error);\n      }\n\n      this.setting.loading = false;\n      this.removeModal = false;\n    },\n\n    modalOk() {\n      if (this.modal.type == 1) {\n        this.addOK();\n      } else {\n        this.editOk();\n      }\n    },\n\n    edit(row) {\n      this.modal.type = 2;\n      this.modal.data = {\n        id: row.id,\n        name: row.name,\n        type: row.type,\n        //1-菜单 2-按钮\n        url: row.url,\n        permission: row.permission,\n        icon: row.icon,\n        sort: row.sort,\n        color: row.color == '' ? '#19BE6B' : row.color,\n        verification: row.verification == null ? 'true' : row.verification == true ? 'true' : 'false'\n      };\n      this.modal.show = true;\n    },\n\n    openAddModal(parent = null) {\n      this.modal.type = 1;\n      this.modal.data = {\n        id: 0,\n        parentId: parent == null ? null : parent.id,\n        name: '',\n        type: 0,\n        //1-菜单 2-按钮\n        url: parent == null ? null : parent.url,\n        permission: parent == null ? null : parent.permission,\n        icon: '',\n        sort: 0,\n        parentName: parent == null ? null : parent.name,\n        verification: parent == null ? 'true' : parent.verification == true ? 'true' : 'false',\n        color: '#19BE6B'\n      };\n      console.log(this.modal.data);\n      this.modal.show = true;\n    }\n\n  }\n};",{"version":3,"sources":["index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div>\r\n    <Card>\r\n      <p slot=\"title\" class=\"card-title\">\r\n        <Icon type=\"home\"></Icon>\r\n        <span>资源管理</span>\r\n      </p>\r\n      <div>\r\n        <template>\r\n          <Row>\r\n            <Col span=\"15\" class=\"margin-bottom-10\">\r\n              <Button type=\"info\" @click=\"openAddModal(null)\">\r\n                <Icon type=\"md-add\"></Icon>&nbsp;添加资源\r\n              </Button>\r\n              <Button :disabled=\"setting.loading\" type=\"success\" @click=\"getData\">\r\n                <Icon type=\"md-refresh\"></Icon>&nbsp;刷新数据\r\n              </Button>\r\n              <Tooltip placement=\"top\">\r\n                <i-switch size=\"large\" v-model=\"props.isFold\">\r\n                  <span slot=\"open\">开启</span>\r\n                  <span slot=\"close\">关闭</span>\r\n                </i-switch>\r\n                <div slot=\"content\">\r\n                  <p>是否折叠所有的节点</p>\r\n                </div>\r\n              </Tooltip>\r\n            </Col>\r\n          </Row>\r\n          <zk-table\r\n            ref=\"table\"\r\n            sum-text=\"sum\"\r\n            index-text=\"#\"\r\n            :data=\"datas\"\r\n            :columns=\"columns\"\r\n            :stripe=\"props.stripe\"\r\n            :border=\"props.border\"\r\n            :show-header=\"props.showHeader\"\r\n            :show-summary=\"props.showSummary\"\r\n            :show-row-hover=\"props.showRowHover\"\r\n            :show-index=\"props.showIndex\"\r\n            :tree-type=\"props.treeType\"\r\n            :is-fold=\"props.isFold\"\r\n            :expand-type=\"props.expandType\"\r\n            :selection-type=\"props.selectionType\">\r\n            <template slot=\"type\" slot-scope=\"scope\">\r\n              <span v-if=\"scope.row.type==0\"><Icon type=\"grid\"></Icon>&nbsp;菜单</span>\r\n              <span v-else><Icon type=\"android-radio-button-on\"></Icon>&nbsp;按钮</span>\r\n            </template>\r\n            <template slot=\"icon\" slot-scope=\"scope\">\r\n              <span v-if=\"scope.row.icon!=null && scope.row.icon!=''\"><Icon :type=\"scope.row.icon\"></Icon></span>\r\n              <span v-else>-</span>\r\n            </template>\r\n            <template slot=\"color\" slot-scope=\"scope\">\r\n                            <span v-if=\"scope.row.color!=null && scope.row.color!=''\">\r\n                                <Icon type=\"paintbucket\" :color=\"scope.row.color\"></Icon>\r\n                            </span>\r\n              <span v-else>-</span>\r\n            </template>\r\n            <template slot=\"verification\" slot-scope=\"scope\">\r\n                            <span v-if=\"scope.row.verification==true\">\r\n                                是\r\n                            </span>\r\n              <span v-else>否</span>\r\n            </template>\r\n            <template slot=\"action\" slot-scope=\"scope\">\r\n              <Button type=\"primary\" @click=\"edit(scope.row)\" size=\"small\">编辑</Button>\r\n              <Button type=\"success\" @click=\"openAddModal(scope.row)\" size=\"small\">添加下级</Button>\r\n              <Button type=\"error\" @click=\"removeModalOpen(scope.row.id)\" size=\"small\">删除</Button>\r\n            </template>\r\n          </zk-table>\r\n        </template>\r\n      </div>\r\n    </Card>\r\n    <Modal v-model=\"modal.show\" :title=\"modal.type==1 ? '添加资源':'更新资源'\"\r\n           @on-ok=\"modalOk\"\r\n           :mask-closable=\"false\">\r\n      <Alert show-icon>为方便操作，添加时[资源链接/权限标识]会自动继承父级的资源属性。</Alert>\r\n      <Form :model=\"modal.data\" :label-width=\"80\">\r\n        <FormItem v-if=\"modal.type==2\" label=\"ID\">\r\n          <Input disabled :value=\"modal.data.id\"></Input>\r\n        </FormItem>\r\n        <FormItem v-if=\"modal.type==1 && modal.data.parentName!=null\" label=\"父级名称\">\r\n          <Input disabled :value=\"modal.data.parentName\"></Input>\r\n        </FormItem>\r\n        <FormItem label=\"名称\">\r\n          <Input v-model.trim=\"modal.data.name\"></Input>\r\n        </FormItem>\r\n        <FormItem label=\"类型\">\r\n          <Select v-model.trim=\"modal.data.type\" style=\"width:100%\">\r\n            <Option v-for=\"item in [{label:'菜单',value:0},{label:'按钮',value:1}]\"\r\n                    :value=\"item.value\" :key=\"item.value\">{{ item.label }}\r\n            </Option>\r\n          </Select>\r\n        </FormItem>\r\n        <FormItem label=\"资源链接\">\r\n          <Input v-model.trim=\"modal.data.url\"></Input>\r\n        </FormItem>\r\n        <FormItem label=\"权限标识\">\r\n          <Input v-model.trim=\"modal.data.permission\"></Input>\r\n        </FormItem>\r\n        <FormItem label=\"验证与否\">\r\n          <Select v-model=\"modal.data.verification\" style=\"width:100%\">\r\n            <Option v-for=\"verOption in [{label:'是',value:'true'},{label:'否',value:'false'}]\"\r\n                    :value=\"verOption.value\" :key=\"verOption.value\">{{ verOption.label }}\r\n            </Option>\r\n          </Select>\r\n        </FormItem>\r\n        <FormItem label=\"颜色标示\">\r\n          <color-picker v-model=\"modal.data.color\" recommend></color-picker>\r\n        </FormItem>\r\n        <FormItem label=\"图标\">\r\n          <Input v-model.trim=\"modal.data.icon\"></Input>\r\n        </FormItem>\r\n        <FormItem label=\"排序\">\r\n          <InputNumber :min=\"0\" :step=\"1\" v-model.trim=\"modal.data.sort\" style=\"width:100%\"/>\r\n        </FormItem>\r\n      </Form>\r\n    </Modal>\r\n    <Modal v-model=\"removeModal\" width=\"360\">\r\n      <p slot=\"header\" style=\"color:#f60;text-align:center\">\r\n        <Icon type=\"information-circled\"></Icon>\r\n        <span>提示</span>\r\n      </p>\r\n      <div style=\"text-align:center\">\r\n        <p>此操作为不可逆操作，是否确认删除？</p>\r\n      </div>\r\n      <div slot=\"footer\">\r\n        <Button type=\"error\" size=\"large\" long @click=\"remove\">确认删除</Button>\r\n      </div>\r\n    </Modal>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { post } from '@/libs/axios-cfg'\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      removeModal: false,\r\n      setting: {\r\n        loading: true,\r\n        showBorder: true\r\n      },\r\n      props: {\r\n        stripe: true,\r\n        border: true,\r\n        showHeader: true,\r\n        showSummary: false,\r\n        showRowHover: true,\r\n        showIndex: false,\r\n        treeType: true,\r\n        isFold: true,\r\n        expandType: false,\r\n        selectionType: false,\r\n      },\r\n      datas: [],\r\n      columns: [\r\n        {\r\n          label: '资源名称',\r\n          prop: 'name',\r\n          width: '400px',\r\n        },\r\n        {\r\n          label: '类型',\r\n          prop: 'type',\r\n          type: 'template',\r\n          template: 'type',\r\n        },\r\n        {\r\n          label: '资源链接',\r\n          prop: 'url',\r\n        },\r\n        {\r\n          label: '权限标识',\r\n          prop: 'permission',\r\n        },\r\n        {\r\n          label: '验证与否',\r\n          prop: 'verification',\r\n          type: 'template',\r\n          template: 'verification',\r\n          width: '85px'\r\n        },\r\n        {\r\n          label: '颜色',\r\n          prop: 'color',\r\n          type: 'template',\r\n          template: 'color',\r\n          width: '60px'\r\n        },\r\n        {\r\n          label: '图标',\r\n          prop: 'icon',\r\n          type: 'template',\r\n          template: 'icon',\r\n          width: '80px'\r\n        },\r\n        {\r\n          label: '排序',\r\n          prop: 'sort',\r\n          width: '100px'\r\n        },\r\n        {\r\n          label: '操作',\r\n          type: 'template',\r\n          prop: 'action',\r\n          template: 'action',\r\n        }\r\n      ],\r\n      modal: {\r\n        show: false,\r\n        type: 1,\r\n        data: {\r\n          id: 0,\r\n          name: '',\r\n          type: 1, //0-菜单 1-按钮\r\n          url: '',\r\n          permission: '',\r\n          icon: '',\r\n          sort: 0,\r\n          color: '#19BE6B',\r\n          verification: 'true'\r\n        }\r\n      },\r\n      removeObject: null\r\n    }\r\n  },\r\n  created () {\r\n    this.getData()\r\n  },\r\n  methods: {\r\n    async getData () {\r\n      this.setting.loading = true\r\n      try {\r\n        let res = await post('/system/resource/list')\r\n        this.datas = res.data\r\n      } catch (error) {\r\n        this.$throw(error)\r\n      }\r\n      this.setting.loading = false\r\n    },\r\n    async addOK () {\r\n      this.$Message.loading({\r\n        content: '资源添加中...',\r\n        duration: 0\r\n      })\r\n      try {\r\n        await post('/system/resource/add', this.modal.data)\r\n        this.getData(false)\r\n        this.$Message.destroy()\r\n        this.$Message.success({\r\n          content: '资源添加成功',\r\n          duration: 1.5\r\n        })\r\n      } catch (error) {\r\n        this.$throw(error)\r\n      }\r\n    },\r\n    async editOk () {\r\n      this.$Message.loading({\r\n        content: '资源更新中...',\r\n        duration: 0\r\n      })\r\n      try {\r\n        await post('/system/resource/update/{id}', this.modal.data, {\r\n          id: this.modal.data.id\r\n        })\r\n        this.getData(false)\r\n        this.$Message.destroy()\r\n        this.$Message.success({\r\n          content: '资源更新成功',\r\n          duration: 1.5\r\n        })\r\n      } catch (error) {\r\n        this.$throw(error)\r\n      }\r\n    },\r\n    removeModalOpen (id) {\r\n      this.removeModal = true\r\n      this.removeObject = id\r\n    },\r\n    async remove () {\r\n      this.setting.loading = true\r\n      this.$Message.loading({\r\n        content: '资源删除中...',\r\n        duration: 0\r\n      })\r\n      try {\r\n        await post('/system/resource/remove/{id}', null, {\r\n          id: this.removeObject\r\n        })\r\n        this.getData(false)\r\n        this.$Message.destroy()\r\n        this.$Message.success({\r\n          content: '资源删除成功',\r\n          duration: 1.5\r\n        })\r\n      } catch (error) {\r\n        this.$throw(error)\r\n      }\r\n      this.setting.loading = false\r\n      this.removeModal = false\r\n    },\r\n    modalOk () {\r\n      if (this.modal.type == 1) {\r\n        this.addOK()\r\n      } else {\r\n        this.editOk()\r\n      }\r\n    },\r\n    edit (row) {\r\n      this.modal.type = 2\r\n      this.modal.data = {\r\n        id: row.id,\r\n        name: row.name,\r\n        type: row.type, //1-菜单 2-按钮\r\n        url: row.url,\r\n        permission: row.permission,\r\n        icon: row.icon,\r\n        sort: row.sort,\r\n        color: row.color == '' ? '#19BE6B' : row.color,\r\n        verification: row.verification == null ? 'true' : row.verification == true ? 'true' : 'false',\r\n      }\r\n      this.modal.show = true\r\n    },\r\n    openAddModal (parent = null) {\r\n      this.modal.type = 1\r\n      this.modal.data = {\r\n        id: 0,\r\n        parentId: parent == null ? null : parent.id,\r\n        name: '',\r\n        type: 0, //1-菜单 2-按钮\r\n        url: parent == null ? null : parent.url,\r\n        permission: parent == null ? null : parent.permission,\r\n        icon: '',\r\n        sort: 0,\r\n        parentName: parent == null ? null : parent.name,\r\n        verification: parent == null ? 'true' : parent.verification == true ? 'true' : 'false',\r\n        color: '#19BE6B'\r\n      }\r\n      console.log(this.modal.data)\r\n      this.modal.show = true\r\n    }\r\n  }\r\n}\r\n</script>\r\n"],"sourceRoot":"src/view/system/resource"}]}