{"remainingRequest":"C:\\Users\\YKB\\Desktop\\github\\manage-web\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\YKB\\Desktop\\github\\manage-web\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\YKB\\Desktop\\github\\manage-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\YKB\\Desktop\\github\\manage-web\\src\\view\\system\\user\\components\\reset-password.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\YKB\\Desktop\\github\\manage-web\\src\\view\\system\\user\\components\\reset-password.vue","mtime":1562898218000},{"path":"C:\\Users\\YKB\\Desktop\\github\\manage-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\YKB\\Desktop\\github\\manage-web\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\YKB\\Desktop\\github\\manage-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\YKB\\Desktop\\github\\manage-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { post } from '@/libs/axios-cfg';\nexport default {\n  data() {\n    return {\n      show: true,\n      loading: false,\n      data: {\n        password: '',\n        rePassword: ''\n      },\n      ruls: {\n        password: [{\n          required: true,\n          message: \"请填写密码\"\n        }, {\n          pattern: /^(\\w){6,18}$/,\n          message: '密码应为[A-Za-z0-9_]组成的6-18位字符'\n        }],\n        rePassword: {\n          validator: (rule, value, callback, source, options) => {\n            if (value === \"\") {\n              callback(new Error(\"请再次输入密码\"));\n            } else if (value !== this.data.password) {\n              callback(new Error(\"两次输入密码不一致!\"));\n            } else {\n              callback();\n            }\n          }\n        }\n      }\n    };\n  },\n\n  props: {\n    user: {\n      type: Object,\n      default: {}\n    }\n  },\n  methods: {\n    /**\r\n     * @description 关闭Modal\r\n     * @param reload 是否重新加载数据\r\n     */\n    cancel(reload = false) {\n      this.$emit(\"cancel\", \"resetPassword\", reload);\n    },\n\n    ok() {\n      this.$refs.modalForm.validate(valid => {\n        if (valid) {\n          this.resetPost({\n            password: this.data.password,\n            uid: this.user.id\n          });\n        }\n      });\n    },\n\n    async resetPost(data) {\n      this.loading = true;\n\n      try {\n        let res = await post('/system/user/reset-password', data);\n        this.$Message.success(\"用户 \" + this.user.username + \" 密码重置成功\");\n        this.cancel(true);\n      } catch (error) {\n        this.$throw(error);\n      }\n\n      this.loading = false;\n    }\n\n  }\n};",{"version":3,"sources":["reset-password.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAqBA,SAAA,IAAA,QAAA,kBAAA;AACA,eAAA;AACA,EAAA,IAAA,GAAA;AACA,WAAA;AACA,MAAA,IAAA,EAAA,IADA;AAEA,MAAA,OAAA,EAAA,KAFA;AAGA,MAAA,IAAA,EAAA;AACA,QAAA,QAAA,EAAA,EADA;AAEA,QAAA,UAAA,EAAA;AAFA,OAHA;AAOA,MAAA,IAAA,EAAA;AACA,QAAA,QAAA,EAAA,CACA;AAAA,UAAA,QAAA,EAAA,IAAA;AAAA,UAAA,OAAA,EAAA;AAAA,SADA,EAEA;AAAA,UAAA,OAAA,EAAA,cAAA;AAAA,UAAA,OAAA,EAAA;AAAA,SAFA,CADA;AAKA,QAAA,UAAA,EAAA;AACA,UAAA,SAAA,EAAA,CAAA,IAAA,EAAA,KAAA,EAAA,QAAA,EAAA,MAAA,EAAA,OAAA,KAAA;AACA,gBAAA,KAAA,KAAA,EAAA,EAAA;AACA,cAAA,QAAA,CAAA,IAAA,KAAA,CAAA,SAAA,CAAA,CAAA;AACA,aAFA,MAEA,IAAA,KAAA,KAAA,KAAA,IAAA,CAAA,QAAA,EAAA;AACA,cAAA,QAAA,CAAA,IAAA,KAAA,CAAA,YAAA,CAAA,CAAA;AACA,aAFA,MAEA;AACA,cAAA,QAAA;AACA;AACA;AATA;AALA;AAPA,KAAA;AAyBA,GA3BA;;AA4BA,EAAA,KAAA,EAAA;AACA,IAAA,IAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAFA;AADA,GA5BA;AAkCA,EAAA,OAAA,EAAA;AACA;;;;AAIA,IAAA,MAAA,CAAA,MAAA,GAAA,KAAA,EAAA;AACA,WAAA,KAAA,CAAA,QAAA,EAAA,eAAA,EAAA,MAAA;AACA,KAPA;;AAQA,IAAA,EAAA,GAAA;AACA,WAAA,KAAA,CAAA,SAAA,CAAA,QAAA,CAAA,KAAA,IAAA;AACA,YAAA,KAAA,EAAA;AACA,eAAA,SAAA,CAAA;AACA,YAAA,QAAA,EAAA,KAAA,IAAA,CAAA,QADA;AAEA,YAAA,GAAA,EAAA,KAAA,IAAA,CAAA;AAFA,WAAA;AAIA;AACA,OAPA;AAQA,KAjBA;;AAkBA,UAAA,SAAA,CAAA,IAAA,EAAA;AACA,WAAA,OAAA,GAAA,IAAA;;AACA,UAAA;AACA,YAAA,GAAA,GAAA,MAAA,IAAA,CAAA,6BAAA,EAAA,IAAA,CAAA;AACA,aAAA,QAAA,CAAA,OAAA,CAAA,QAAA,KAAA,IAAA,CAAA,QAAA,GAAA,SAAA;AACA,aAAA,MAAA,CAAA,IAAA;AACA,OAJA,CAIA,OAAA,KAAA,EAAA;AACA,aAAA,MAAA,CAAA,KAAA;AACA;;AACA,WAAA,OAAA,GAAA,KAAA;AACA;;AA5BA;AAlCA,CAAA","sourcesContent":["<template>\r\n    <div>\r\n        <Modal v-model=\"show\" :title=\"'重置 '+user.username+' 的密码'\"\r\n            :mask-closable=\"false\"  :closable=\"false\">\r\n             <Form ref=\"modalForm\" :model=\"data\" :rules=\"ruls\"\r\n                    :label-width=\"80\">\r\n                <FormItem label=\"新密码\" prop=\"password\">\r\n                    <Input v-model.trim=\"data.password\" type=\"password\"></Input>\r\n                </FormItem>\r\n                <FormItem label=\"重复密码\" prop=\"rePassword\">\r\n                    <Input v-model.trim=\"data.rePassword\" type=\"password\"></Input>\r\n                </FormItem>\r\n            </Form>\r\n            <div slot=\"footer\">\r\n                <Button type=\"default\" :disabled=\"loading\" @click=\"cancel(false)\">取消</Button>\r\n                <Button type=\"primary\" :loading=\"loading\" @click=\"ok\">确定</Button>\r\n            </div>\r\n        </Modal>\r\n    </div>\r\n</template>\r\n<script>\r\nimport { post } from '@/libs/axios-cfg'\r\nexport default {\r\n    data(){\r\n        return {\r\n            show:true,\r\n            loading:false,\r\n            data:{\r\n                password:'',\r\n                rePassword:''\r\n            },\r\n            ruls:{\r\n                password: [\r\n                    { required: true, message: \"请填写密码\"},\r\n                    {pattern:/^(\\w){6,18}$/,message:'密码应为[A-Za-z0-9_]组成的6-18位字符'}\r\n                ],\r\n                rePassword:{\r\n                    validator:(rule, value, callback, source, options) => {\r\n                        if (value === \"\") {\r\n                            callback(new Error(\"请再次输入密码\"));\r\n                        } else if (value !== this.data.password) {\r\n                            callback(new Error(\"两次输入密码不一致!\"));\r\n                        } else {\r\n                            callback();\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n    props:{\r\n        user:{\r\n            type:Object,\r\n            default:{}\r\n        }\r\n    },\r\n    methods:{\r\n        /**\r\n         * @description 关闭Modal\r\n         * @param reload 是否重新加载数据\r\n         */\r\n        cancel(reload = false) {\r\n            this.$emit(\"cancel\", \"resetPassword\", reload);\r\n        },\r\n        ok(){\r\n            this.$refs.modalForm.validate(valid => {\r\n                if (valid) {\r\n                    this.resetPost({\r\n                        password:this.data.password,\r\n                        uid:this.user.id\r\n                    })\r\n                }\r\n            });\r\n        },\r\n        async resetPost(data){\r\n            this.loading = true;\r\n            try {\r\n                let res = await post('/system/user/reset-password',data)\r\n                this.$Message.success(\"用户 \"+this.user.username+\" 密码重置成功\");\r\n                this.cancel(true)\r\n            } catch (error) {\r\n                this.$throw(error)\r\n            }\r\n            this.loading = false;\r\n        }\r\n    }\r\n\r\n};\r\n</script>\r\n"],"sourceRoot":"src/view/system/user/components"}]}